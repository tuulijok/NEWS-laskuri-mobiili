<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEWS-laskuri</title>

    <style>
        body {
            background-size: cover;
            background-image: url("https://images.pexels.com/photos/11198232/pexels-photo-11198232.jpeg");
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        div.card {
            display: grid;
            grid-template-columns: minmax(100px, 1fr);
            background-color: red;
            height: 100%;
        }
        .nappi{
            border-radius: 20px;
            backdrop-filter: blur(8px);
            background-color: rgba(219, 219, 219, 0.175);

        }
        
    </style>
</head>
<body>
    <!--Sisältö-->
    <div class="master">
        <div class="card" id="sisältö">
            <button class="nappi" onclick="näytä(); laske(); tulokset(); ohjeet();"></button>
            <button class="nappi" onclick="nollaa();"></button>
        </div>

    </div>
    
</body>
<footer>
    <script>
        const näkyy = false
        x = document.getElementById("sisältö")
        function nollaa() {
            if (x.style.display === "block") {
                x.style.display = "none";
            }
        }
        function näytä() {
            näkyy = true
            x = document.getElementById("sisältö")
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                /// why are you here
            }

        }
        function laske() {
            const hf = document.getElementById("hfinput");
            const spo2 = document.getElementById("spo2input");
            const addito2 = document.getElementById("addito2input");
            const rrsys = document.getElementById("rrsysinput");
            const rrdia = document.getElementById("rrdiainput");
            const syke = document.getElementById("sykeinput");
            const taj = document.getElementById("tajinput");
            const temp = document.getElementById("tempinput");

            pisteet = 0;

            function range(x, min, max) {
                return x >= min && x <= max;
            }

            if (range(hf, 12, 20)) {
                pisteet = pisteet + 0
                omahf = 0    
            } else if  (range(hf, 9, 11)) {
                pisteet = pisteet + 1
                omahf = 1
            } else if (hf <= 8) {
                pisteet = pisteet + 3
                omahf = 3
            } else if (range(hf, 21, 24)){
                pisteet = pisteet + 2    
                omahf = 2
            } else if (hf >= 25) {
                pisteet = pisteet + 3
                omahf = 3
            } 


            if (spo2 <= 91) {
                pisteet = pisteet + 3

                omaspo2 = 3
            } else if (range(spo2, 92, 93)) {
                pisteet = pisteet + 2

                omaspo2 = 2
            } else if (range(spo2, 94, 95)) {
                pisteet = pisteet + 1

                omaspo2 = 1
            } else if (spo2 >= 96) {
                pisteet = pisteet + 0
                omaspo2 = 0
            }


            if (addito2 === "k" || addito2 === "K") {
                pisteet = pisteet + 2
                omaaddito2 = 2
            } else if (addito2 === "e" || addito2 === "E") {
                pisteet = pisteet + 0
                omaaddito2 = 0
            }


            if (rrsys <= 90) {
                pisteet = pisteet + 3
                omarrsys = 3
            } else if (range(rrsys, 91, 100)) {
                pisteet = pisteet + 2
                omarrsys = 2
            } else if (range(rrsys, 101, 110)) {
                pisteet = pisteet + 1
                omarrsys = 1
            } else if (range(rrsys, 111, 219)) {
                pisteet = pisteet + 0
                omarrsys = 0
            } else if (rrsys >= 220) {
                pisteet = pisteet + 3
                omarrsys = 3
            }


            if (syke <= 40) {
                pisteet = pisteet + 3
                omasyke = 3
            } else if (range(syke, 41, 50)) {
                pisteet = pisteet + 1
                omasyke = 1
            } else if (range(syke, 51, 90)) {
                pisteet = pisteet + 0
                omasyke = 0
            } else if (range(syke, 91, 110)) {
                pisteet = pisteet + 1
                omasyke = 1
            } else if (range(syke, 111, 130)) {
                pisteet = pisteet + 2
                omasyke = 2
            } else if (syke >= 131) {
                pisteet = pisteet + 3
                omasyke = 3
            }


            if (taj === "N" || taj === "n") {
                pisteet = pisteet + 0
                omataj = 0
            } else if (taj === "P" || taj === "p") {
                pisteet = pisteet + 3
                omataj = 3
            }


            if (temp <= 35.0) {
                pisteet = pisteet + 3
                omatemp = 3
            } else if (range(temp, 35.1, 36.0)) {
                pisteet = pisteet + 1
                omatemp = 1
            } else if (range(temp, 36.1, 38.0)) {
                pisteet = pisteet + 0
                omatemp = 0
            } else if (range(temp, 38.1, 39.0)) {
                pisteet = pisteet + 1
                omatemp = 1
            } else if (temp >= 39.1) {
                pisteet = pisteet + 2
                omatemp = 2
            }

            var totOma = omatemp + omataj + omasyke + omarrsys + omaaddito2 + omaspo2 + omahf


            document.getElementById("pisteet").innerHTML = pisteet
            
            valmis = 1
        }       

        function tulokset() {
            function range(x, min, max) {
                return x >= min && x <= max;
            }
            if (valmis === 1) {
                document.getElementById("potvit").innerText = "Vitaalit:"
                //document.getElementById("AB").innerHTML = "A + B"
                document.getElementById("hf").innerHTML = "Hengitysfrekvenssi: " + hf + "/min";
                document.getElementById("spo2").innerHTML = "Happisaturaatio: " + spo2 + " %";
                document.getElementById("addito2").innerHTML = "Lisähappi käytössä: " + addito2;
                //document.getElementById("C").innerHTML = "C"
                if (rrdia !== 0) {
                    document.getElementById("RR").innerHTML = "Verenpaine: " + rrsys + "/" + rrdia + " mmhg";
                } else {
                    document.getElementById("rrsys").innerHTML = "Sys. verenpaine: " + rrsys + " mmHg";
                }
                document.getElementById("syke").innerHTML = "Syke: " + syke;
                //document.getElementById("D").innerHTML = "D"
                document.getElementById("taj").innerHTML = "Tajunnantaso:" + taj; 
                //document.getElementById("E").innerHTML = "E"
                document.getElementById("temp").innerHTML = "Lämpö: " + temp + " °C";
            }
        }  
        function ohjeet() {
            function range(x, min, max) {
                return x >= min && x <= max;
            }
            document.getElementById("ohjeotsikko").innerHTML = "Ohjeet:"
                if (pisteet >= 7) {
                    document.getElementById("ohje1").innerHTML = "TEE MET-HÄLYTYS!\n";
                    document.getElementById("ohje2").innerHTML = "- Hälytä hoitava lääkäri!\n - Laske NEWS-pisteet 0-2 tunnin välein. Jatkuva seuranta.";

                } else if (range(pisteet, 5, 6)) {
                    document.getElementById("ohje1").innerHTML = " - Riskiluokka: Kohtalainen\n\n - Informoi muita hoitajia potilaan voinnin muutoksista.\n - Konsultoi lääkäriä jatkotoimista\n - Laske NEWS-pisteet vähintään 2-4 tunnin välein";
                    document.getElementById("ohje2").innerHTML = " - Aloita tarvittaessa välittömät hoitotoimenpiteet!";

                } else if (range(pisteet, 1, 4)) {
                    document.getElementById("ohje1").innerHTML = " - Riskiluokka: Matala\n - Informoi muita hoitajia potilaan voinnin muutoksista.\n - Laske NEWS-pisteet vähintään 8 tunnin välein.";
                    document.getElementById("ohje2").innerHTML = ""

                } else if (pisteet === 0) {
                    document.getElementById("ohje1").innerHTML = " - Riskiluokka: Matala\n\n - Laske NEWS-pisteet vähintään 12 tunnin välein."
                    document.getElementById("ohje2").innerHTML = ""
                }
        }
    </script>
</footer>
</html>